<!DOCTYPE html>
<!-- Copyright(c) Lester J. Clark and Contributors. -->
<!-- Licensed under the MIT License.-->
<!-- TextGen.html -->
<html lang="en">
<head>
  <title>Test Text Generation</title>
  <link rel="stylesheet" type="text/css" href="../Common.css" />
  <script src="../Common.js"></script>
  <script src="RepeatItem.js"></script>
  <script src="RepeatItems.js"></script>
  <script src="Replacement.js"></script>
  <script src="Replacements.js"></script>
  <script src="Section.js"></script>
  <script src="Sections.js"></script>
</head>
<body>
  <form>
    <label for="text">Text</label><br />
    <textarea id="text" name="text" rows="1" cols="80"
              autofocus spellcheck="false"
              class="text"></textarea>
  </form>
  <button id="ok" type="button">OK</button>

  <script>
    // Create Data
    let sections = new Sections();
    let section = sections.Add("Main");

    let repeatItems = section.RepeatItems;
    let repeatItem = repeatItems.Add("First");

    let replacements = repeatItem.Replacements;
    replacements.Add("_CollectionName_", "GenItems")
    replacements.Add("_ClassName_", "GenItem")
    let replacement = replacements.Items(0);
    alert(replacement.Value);

    // Events
    text.addEventListener("keyup", Common.SetTextRows);
    ok.addEventListener("click", ProcessTemplate);

    function ProcessTemplate()
    {
      let lines = text.value.split("\n");
      if (Array.isArray(lines))
      {
        for (index = 0; index < lines.length; index++)
        {
          alert(lines[index]);
        }
      }
    }
  </script>
</body>
</html>
